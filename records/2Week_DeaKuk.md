# 2 Week mission

## 필수 미션 [v]
- 호감표시 할 때 예외처리 케이스 3가지 이상을 추가로 처리 [v]
  1. 로그인을 하지않은경우 호감표시를 할 수 없다. [v]
  2. 현재 본인의 인스타 id 를 등록하지 않은 회원은 호감표시를 할 수 없다. [v]
  3. 현재 본인이 본인의 인스타 id 를 호감 상대로 등록할 수 없다. [v]
  4. 같은 인스타 회원에게 중복으로 호감표시를 할 수 없다. [v]
    - 같은 회원이더라도 다른 항목으로 호감표시하는 것은 가능하다. [v]
    - 이 때 새로운 객체가 생성되는 것이 아닌 기존 객체에 호감표시 사유만 변경이되어야 한다. [v]
  5. 호감표시 할 수 있는 횟수는 최대 10번이다. [v]
  
### 필수미션 4번 작업중 문제 발생 [v] 문제 해결
- 문제[v]
  - member 의 instagram list (호감표시한 instagram 목록) 에 값이 재대로 저장되지 않는다.
- 원인 1.[v]
  - test case , 디버깅과 sql 을 통해 유추해본 결과 entity 에서 단방향으로 연관관계가 설정되있어서 그런 것 같다.
  - instagram 쪽에서 member 로 설정한 연관관계는 연동되는 member 를 뜻하는데 이 둘이 충돌을 일으켜 문제가 발생되는것 같다.
- 원인 1. 에 대한 해결 방법[v]
  - 연관관계를 다시 설정해주어야 될것 같다..
  - member 가 연동된 instagram 을 String name 값으로 기억하는 것 처럼 instagram 도 객체가 아닌 member 의 username 값으로 기억하게 변경
  - 기존 instagram 의 연관관계는 삭제해야 될 것 같다.
  - 자신에게 호감을 표시한 member 의 판별을 likeable 을 통해서 확인할 수 있기때문에 괜찮을 것 같다.

<br>

- 원인 1. 해결책 에 대한 문제 발생[v]
  - instagram 쪽의 연관관계를 제거하니 member 쪽의 mapped by 에 문제가 발생했다..
  - 그냥 member 쪽 연관관계도 제거하고 매핑 테이블인 likeable 을 통해서만 호감을 확인해야 될 것 같다.

<br>

## 추가 미션 [v]
- naver 로그인 연동 [v]
  - Spring OAuth2 클라이언트를 사용한 소셜 로그인 구현 [v]
  - username 이 to string 형태가 아닌 id 값만 따로 추출된 형태여야 한다. [v]